<div class="container">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <div>
      <h1 class="mb-1">Projects</h1>
      <p class="text-muted mb-0">Manage your security assessment projects</p>
    </div>
    <a href="/admin/projects/new" class="btn btn-primary">
      <i class="bi bi-plus-lg me-1"></i>New Project
    </a>
  </div>

  <div class="card">
    <div class="card-body p-0">
      {{#if projects.length}}
        <div class="table-responsive">
          <table class="table table-hover mb-0">
            <thead>
              <tr>
                <th>Project Name</th>
                <th>Classification</th>
                <th>Hosting</th>
                <th>Owner</th>
                <th>Status</th>
                <th>Created</th>
                <th></th>
              </tr>
            </thead>
            <tbody>
              {{#each projects}}
                <tr>
                  <td>
                    <a href="/admin/projects/{{this.id}}" class="fw-semibold text-decoration-none">{{this.name}}</a>
                    {{#if this.has_pii}}<span class="badge bg-danger ms-1" title="Contains PII">PII</span>{{/if}}
                  </td>
                  <td><span class="badge bg-info">{{this.data_classification}}</span></td>
                  <td class="text-muted">{{this.hosting_type}}</td>
                  <td class="text-muted">{{this.project_owner_name}}</td>
                  <td>{{{statusBadge this.status}}}</td>
                  <td class="text-muted small">{{formatDate this.created_at}}</td>
                  <td class="text-end text-nowrap">
                    <a href="/admin/projects/{{this.id}}" class="btn btn-sm btn-outline-primary">
                      <i class="bi bi-eye"></i>
                    </a>
                    <form action="/admin/projects/{{this.id}}/delete" method="POST" class="d-inline ms-1"
                      onsubmit="return confirm('Delete this project? Only works if all assessments are in draft status.')">
                      <button type="submit" class="btn btn-sm btn-outline-danger" title="Delete project">
                        <i class="bi bi-trash"></i>
                      </button>
                    </form>
                  </td>
                </tr>
              {{/each}}
            </tbody>
          </table>
        </div>
      {{else}}
        <div class="p-5 text-center text-muted">
          <i class="bi bi-folder-plus" style="font-size:3rem"></i>
          <h4 class="mt-3">No projects yet</h4>
          <p>Create your first project to start a security assessment.</p>
          <a href="/admin/projects/new" class="btn btn-primary"><i class="bi bi-plus-lg me-1"></i>Create Project</a>
        </div>
      {{/if}}
    </div>
  </div>
</div>
